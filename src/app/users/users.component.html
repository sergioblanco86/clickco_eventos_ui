<div class="users-container" *ngIf="!loading else loadingSpinner">
  <!--<div class="filters">
    <mat-form-field>
      <input matInput placeholder="Filtrar">
    </mat-form-field>
    <mat-form-field>
      <mat-select placeholder="Estado">
        <mat-option>&#45;&#45;</mat-option>
        <mat-option value="active">Activo</mat-option>
        <mat-option value="inactive">Inactivo</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field>
      <mat-select placeholder="Perfil" multiple>
        <mat-option value="admin">Administrador</mat-option>
        <mat-option value="aprobador">Aprobador</mat-option>
        <mat-option value="cliente">Cliente</mat-option>
      </mat-select>
    </mat-form-field>
  </div>-->

  <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z4">
    <ng-container matColumnDef="nombre">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Nombre</th>
      <td mat-cell *matCellDef="let element"> {{element.nombre}}</td>
    </ng-container>

    <ng-container matColumnDef="apellido">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Apellido</th>
      <td mat-cell *matCellDef="let element"> {{element.apellido}}</td>
    </ng-container>

    <ng-container matColumnDef="cedula">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Cédula</th>
      <td mat-cell *matCellDef="let element"> {{element.cedula | number}}</td>
    </ng-container>

    <ng-container matColumnDef="tipo_perfil">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Perfil</th>
      <td mat-cell *matCellDef="let element" [innerHTML]="getUserProfileType(element.tipo_perfil)"></td>
    </ng-container>

    <ng-container matColumnDef="email">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Email</th>
      <td mat-cell *matCellDef="let element"> {{element.email}}</td>
    </ng-container>

    <ng-container matColumnDef="estado">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Estado</th>
      <td mat-cell *matCellDef="let element"> {{element.estado ? 'Activo' : 'Inactivo'}}</td>
    </ng-container>

    <ng-container matColumnDef="fecha_creacion">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha de creación</th>
      <td mat-cell *matCellDef="let element"> {{element.fecha_creacion | date}}</td>
    </ng-container>

    <ng-container matColumnDef="fecha_modificacion">
      <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha de modificación</th>
      <td mat-cell *matCellDef="let element"> {{element.fecha_modificacion | date}}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"
        (click)="editUser(row)" class="user-row"></tr>
  </table>

  <button class="new-user-btn" mat-fab matTooltip="Nuevo usuario" matTooltipPosition="left" (click)="openNewUser();">
    <mat-icon>add</mat-icon>
  </button>
</div>

<ng-template #loadingSpinner>
  <cce-loading [center]="true"></cce-loading>
</ng-template>
